@startuml
skinparam classAttributeIconSize 0
title Resource Domain (refined)

' ===== Base =====
abstract class Resource {
  resourceId: String
}

' ===== Human Resources =====
class HumanResource {
  mecanographicNumber: Long
  shortName: String
  email: String
  phone: String
  humanResourceStatus: HumanResourceStatus
  hrOperationalWindow: HROperationalWindow
}

class HROperationalWindow {
  timezone: String
  notes: String
}

class HRWeeklyRule {
  dayOfWeek: String   ' MON..SUN
  startTime: String   ' "08:00"
  endTime: String     ' "16:00"
}

class HRExceptionRule {
  date: String        ' "2025-12-25"
  type: String        ' OPEN | CLOSED | PARTIAL
  startTime: String   ' optional when CLOSED
  endTime: String     ' optional when CLOSED
  reason: String
}

HROperationalWindow *-- "1..*" HRWeeklyRule
HROperationalWindow o-- "0..*" HRExceptionRule

' Qualification as CRUD-managed entity
class Qualification {
  qualificationId: String
  qualificationType: String 'STS_CRANE_OPERATOR,
  YARD_GANTRY_CRANE_OPERATOR, TRUCK_DRIVER, YARD_PLANNER
  description: String
}

PhysicalResource "1" --> "1" Qualification : requires

enum HumanResourceStatus {
  AVAILABLE
  UNAVAILABLE
  TEMPORARILY_REASSIGNED
}

HumanResource ..> HumanResourceStatus : has
' A staff member can hold multiple qualifications,
' and a qualification can belong to many staff members.
HumanResource "*" -- "*" Qualification : holds
HumanResource "1" *-- "1" HROperationalWindow

' ===== Physical Resources =====
abstract class PhysicalResource {
  code: String   ' unique alphanumeric
  description: String
  physicalResourceAvailability: PhysicalResourceAvailability
  operationalWindow: EquipmentOperationalWindow
  operatingStaffRequirement: int
  setupTimeMin: int
}

enum PhysicalResourceAvailability {
  AVAILABLE
  MAINTENANCE
  TEMP_OUT_OF_SERVICE
}

class EquipmentOperationalWindow {
  timezone: String
  notes: String
}

class EquipmentWeeklyRule {
  dayOfWeek: String
  startTime: String
  endTime: String
}

class EquipmentExceptionRule {
  date: String
  kind: String        ' OPEN | CLOSED | PARTIAL
  startTime: String
  endTime: String
  reason: String
}

EquipmentOperationalWindow *-- "1..*" EquipmentWeeklyRule
EquipmentOperationalWindow o-- "0..*" EquipmentExceptionRule

PhysicalResource ..> PhysicalResourceAvailability : has
PhysicalResource "1" *-- "1" EquipmentOperationalWindow : has


' Current allocation relates to a dock
class Dock {
  code: String
  name: String
}
MobileEquipment "1" --> "0..1" Dock : currentAllocation

' ===== Physical Specializations =====
' Mobile equipment (truck or yard gantry crane)
class MobileEquipment {
  mobileEquipmentType: MobileEquipmentType
  maxSpeedKph: int

  ' Capacity (type-dependent):
  containersPerTrip: int     ' used when mobileEquipmentType = TRUCK
  avgContainersPerHour: int  ' used when mobileEquipmentType = YARD_GANTRY_CRANE
}

MobileEquipment ..> MobileEquipmentType : has a

enum MobileEquipmentType {
  TRUCK
  YARD_GANTRY_CRANE
}


' STS Crane
class STSCrane {
  avgContainersPerHour: int   ' capacity metric for STS cranes
}

STSCrane "1" --> "1" Dock : installedAt

' ===== Inheritance =====
Resource <|-- HumanResource
Resource <|-- PhysicalResource
PhysicalResource <|-- MobileEquipment
PhysicalResource <|-- STSCrane

@enduml
